# Условия 
- проект не распространяется и не шарится никому, в тч не показывается функционал (пока нет выхода на прод), категорически не светить Проект в СКБ, не пересылать ссылку на сайт
- любые изменения вносятся в рамках текущей архитектуры (любые улучшения архитектуры рассматриваются и прио бъективной необходимости внедряются, но не являются самоцелью)
- развивается исключительно Фронтэнд, если от Бэкэнда нужны доп. вебхуки или БД или изменения в БД - создаются по запросу. Бэкэнд развивается параллельно

# Доступы
1. **KeyCloak** - админка авторизации, привязана к лендингу

https://auth.sotiio.com/
- login: adminmaxim
- pass: sotiio4u


2. **Лендинг** 

http://sotiio.com

https://github.com/Tiff0zi/sotiio_landing

Работает через GitPages. Любой коммит - через 1-2 минуты GitPages сам обновляет.
Есть ветка MVP - если в GitPages переключиться на нее, то будет отображаться отладочный вариант отрисовки карты, который работает без лагов как целевое исполнение Pixi и JSmind

3. **Приложение**

http://app.sotiio.com

https://github.com/Tiff0zi/sotiio_app

Работает через VPS. Любой коммит - мнгновенный пуш и через 1 минуту обновление - можно проверять

**Состав**:
- Dockerfile - не трогать! Необходим для работы на VPS
- index.html - главная страница приложения (доступна только авторизованным пользователям, в ином случае - редирект на лендинг)
- container.html - базовая сущность контейнера для узла
- container (папка) - функционал контейнера
  * markdown_tools.js - не помню что там
  * md2html.js - конвертер входящего маркдаун в визуализацию для контейнера
  * meta_update.js - функция обновления Мета в контейнере
  * wiki_template.js - не помню, но вроде отвечает за форму и стиль вкладки Wiki в контейнере
- userstory.html - модальное окно и воронка создания карты
- viewer.html - оркестратор визуализации карты (продвинутый задний фон)
- pixi.html - отрисовка карты pixi
- jsmind.html - отрисовка карты jsmind
- PixiJS (папка) - движок Pixi
- static (папка) - движок JSmind
- CNAME - возможно рудимент уже

# Вебхуки Бэкэнда
1. **Генерация карты** - запускает генерацию карты

https://n8n.sotiio.com/webhook/us

2. **Загрузка карты** - вызывает загрузку карты в двух вариантах: pixi (hex) jsmins (classic mind-map)

https://n8n.sotiio.com/webhook/get_jsmind

https://n8n.sotiio.com/webhook/get_pixi

3. **Загрузка МЕТА данных** - загружаются данные по выбранному узлу карты

https://n8n.sotiio.com/webhook/get_meta

4. **Загрузка Списка карт** - загружаются карты созданные пользователем

https://n8n.sotiio.com/webhook/get_map_list

5. **Обновление МЕТА данных (позже и атрибутов)** - обновляются в БД МЕТА-данные узла (позже и атрибуты подут обновляться - пока не реализовано)

https://n8n.sotiio.com/webhook/update_meta_attributes

6. **Генерация Wiki контента ИИ** - в узле генерится описание Wiki-контента 

https://n8n.sotiio.com/webhook/getwiki

7. **Авторизация через Телеграм**

https://n8n.sotiio.com/webhook/telegram_auth

# Что еще есть?

**Бэкэнд**

- http://n8n.sotiio.com

**Postgres**

- http://db.sotiio.com


