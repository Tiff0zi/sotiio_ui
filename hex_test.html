<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>Pixi sanity check (v7/v8)</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    html, body { margin:0; height:100%; background:#202020; overflow:hidden; }
    #app { width:100vw; height:100vh; }
    #msg { position:fixed; left:10px; top:10px; color:#fff; font:14px system-ui; }
  </style>
</head>
<body>
  <div id="app"></div>
  <div id="msg">init…</div>

  <!-- ВАЖНО: путь к твоему файлу -->
  <script src="./PixiJS/pixi.min.js?v=2"></script>

  <script>
  (async function () {
    const log = (t, err=false) => {
      const el = document.getElementById('msg'); el.textContent = t; el.style.color = err ? '#ff6b6b' : '#ffffff';
      console[err ? 'error' : 'log'](t);
    };

    if (!window.PIXI) { log('PIXI не загрузился: проверь путь ./PixiJS/pixi.min.js', true); return; }

    // Создаём приложение: v8 -> new PIXI.Application(); await init(...)
    //                     v7 -> new PIXI.Application(opts)
    let app;
    try {
      app = new PIXI.Application();
      if (app.init) {
        await app.init({ resizeTo: window, background: '#202020', antialias: true }); // v8
      } else {
        app = new PIXI.Application({ backgroundColor: 0x202020, antialias: true, resizeTo: window }); // v7
      }
    } catch (e) {
      // если new PIXI.Application() требует opts (старый v7)
      app = new PIXI.Application({ backgroundColor: 0x202020, antialias: true, resizeTo: window });
    }

    // Добавляем canvas (v8 -> app.canvas, v7 -> app.view)
    const canvas = app.canvas || app.view;
    document.getElementById('app').appendChild(canvas);

    // Рисуем СИНИЙ прямоугольник — если его видно, Pixi работает
    const g = new PIXI.Graphics();
    if (typeof g.rect === 'function') {
      // v8 API
      g.rect(20, 20, 160, 90).fill({ color: 0x3b82f6 });
    } else {
      // v7 API
      g.beginFill(0x3b82f6);
      g.drawRect(20, 20, 160, 90);
      g.endFill();
    }
    app.stage.addChild(g);

    // Рисуем ШЕСТИУГОЛЬНИК (точно без honeycomb)
    const size = 40;
    const pts = [];
    for (let i = 0; i < 6; i++) {
      const a = (Math.PI / 180) * (60 * i - 30); // pointy-top
      pts.push(Math.cos(a) * size, Math.sin(a) * size);
    }

    const hx = new PIXI.Graphics();
    if (typeof hx.poly === 'function') {
      // v8
      hx.poly(pts, true).fill({ color: 0x88cc88, alpha: 0.7 }).stroke({ color: 0xffffff, width: 1, alpha: 0.35 });
    } else {
      // v7
      hx.lineStyle(1, 0xffffff, 0.35);
      hx.beginFill(0x88cc88, 0.7);
      hx.drawPolygon(pts);
      hx.endFill();
    }
    // позиция гекса — центр экрана
    const w = (app.renderer?.width) || canvas.width;
    const h = (app.renderer?.height) || canvas.height;
    hx.x = w / 2; hx.y = h / 2;
    app.stage.addChild(hx);

    log('OK: виден синий прямоугольник и зелёный шестиугольник в центре');
  })();
  </script>
</body>
</html>
